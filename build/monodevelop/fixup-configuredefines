#!/bin/bash

if [ ! -e ConfigureDefines.cs.in ]; then
	echo "Could not find ConfigureDefines.cs.in: not in the proper directory" >&2
	exit 1
fi

PKG_VERSION=`grep AC_INIT ../../../configure.ac | sed "s/AC\_INIT//; s/[^A-Za-z0-9\. ]//g"`
PACKAGE=`echo $PKG_VERSION | cut -d' ' -f1`
VERSION=`echo $PKG_VERSION | cut -d' ' -f2`

sed -e "
	s/\@PACKAGE\@/$PACKAGE/;
	s/\@GETTEXT_PACKAGE\@/$PACKAGE/;
	s/\@VERSION\@/$VERSION/;
	s/\@prefix\@/\/usr/;
	s/\@expanded_libdir\@/\/usr\/lib/;
	s/\@expanded_datadir\@/\/usr\/share/;
	" < ConfigureDefines.cs.in > ConfigureDefines.cs

